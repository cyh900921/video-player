<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>å½±ç‰‡æ’­æ”¾é é¢</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      background-color: black;
      overflow: hidden; height: 100%;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
    }
    video {
      max-width: 100vw;
      max-height: 90vh;
      background: black;
    }
    .controls, #endControls {
      margin-top: 20px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap; justify-content: center;
    }
    button {
      padding: 20px 40px;
      font-size: 24px;
      border: none; border-radius: 10px;
      background-color: #444; color: #fff;
      cursor: pointer;
    }
    button:hover { background-color: #666; }
    #endControls { display: none; }
  </style>
</head>

<body>

  <!-- â­ ç§»é™¤ controlsï¼ï¼ï¼è®“ Safari ä¸æœƒè·³å‡ºåŸç”ŸæŒ‰éˆ• -->
  <video id="myVideo" playsinline webkit-playsinline>
    <source src="å®Œæ•´å½±ç‰‡.mp4" type="video/mp4">
    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚
  </video>

  <div class="controls">
    <button onclick="togglePlay()">â–¶ï¸ / â¸ï¸ æ’­æ”¾ / æš«åœ</button>
    <button onclick="closePage()">âŒ é—œé–‰é é¢</button>
  </div>

  <div id="endControls">
    <button onclick="restartVideo()">ğŸ” é‡æ–°æ’­æ”¾ 6 æ¬¡</button>
    <button onclick="stopVideo()">â¹ï¸ åœæ­¢æ’­æ”¾</button>
  </div>

<script>
  const video = document.getElementById("myVideo");
  const endControls = document.getElementById("endControls");
  let playCount = 0;
  const MAX_PLAYS = 6;

  function togglePlay() {
    if (video.paused) {
      video.muted = false;
      video.volume = 1.0;
      video.play();
    } else {
      video.pause();
    }
  }

  function closePage() {
    window.close();
    history.back();
  }

  video.addEventListener("ended", () => {
    playCount++;

    if (playCount < MAX_PLAYS) {
      // â­ ä¸é‡è¼‰ videoï¼Œåƒ…ç”¨ currentTime é‡è¨­ï¼Œé¿å…åŸç”Ÿæ§åˆ¶åˆ—é‡ç”Ÿï¼
      video.currentTime = 0;
      video.play();
    } else {
      video.pause();
      endControls.style.display = "flex";
    }
  });

  function restartVideo() {
    playCount = 0;
    endControls.style.display = "none";
    video.currentTime = 0;
    video.play();
  }

  function stopVideo() {
    video.pause();
    video.currentTime = 0;
  }
</script>

</body>
</html>
