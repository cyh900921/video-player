<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>å½±ç‰‡æ’­æ”¾é é¢</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      background-color: black;
      overflow: hidden; height: 100%;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
    }
    video {
      max-width: 100vw;
      max-height: 90vh;
      background: black;
    }
    .controls {
      margin-top: 20px;
      display: flex; gap: 20px;
      flex-wrap: wrap; justify-content: center;
    }
    button {
      padding: 20px 40px;
      font-size: 24px;
      border: none; border-radius: 10px;
      background-color: #444; color: #fff;
      cursor: pointer;
    }
    button:hover {
      background-color: #666;
    }

    /* åœæ­¢å¾Œé¡¯ç¤ºçš„é‡æ”¾/åœæ­¢æŒ‰éˆ•å€å¡Š */
    #endControls {
      display: none; /* åˆå§‹éš±è— */
      margin-top: 30px;
      display: flex;
      gap: 20px;
    }
  </style>
</head>
<body>

  <video id="myVideo" controls playsinline>
    <source src="å®Œæ•´å½±ç‰‡.mp4" type="video/mp4">
    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚
  </video>

  <div class="controls">
    <button onclick="togglePlay()">â–¶ï¸ / â¸ï¸ æ’­æ”¾ / æš«åœ</button>
    <button onclick="closePage()">âŒ é—œé–‰é é¢</button>
  </div>

  <!-- æ’­æ”¾ 6 æ¬¡å¾Œå‡ºç¾çš„æŒ‰éˆ• -->
  <div id="endControls">
    <button onclick="restartVideo()">ğŸ” é‡æ–°æ’­æ”¾ 6 æ¬¡</button>
    <button onclick="stopVideo()">â¹ï¸ åœæ­¢æ’­æ”¾</button>
  </div>

  <script>
    const video = document.getElementById("myVideo");
    const endControls = document.getElementById("endControls");

    let playCount = 0;  // è¨˜éŒ„å·²æ’­æ”¾æ¬¡æ•¸
    const MAX_PLAYS = 6;

    // æ’­æ”¾ / æš«åœæŒ‰éˆ•
    function togglePlay() {
      if (video.paused) {
        video.muted = false;
        video.volume = 1.0;
        video.play();
      } else {
        video.pause();
      }
    }

    // é—œé–‰ç¶²é 
    function closePage() {
      window.close();
      history.back();
    }

    // å½±ç‰‡æ’­æ”¾åˆ°çµå°¾æ™‚æª¢æŸ¥æ¬¡æ•¸
    video.addEventListener("ended", () => {
      playCount++;

      if (playCount < MAX_PLAYS) {
        // è‡ªå‹•é‡æ’­
        video.currentTime = 0;
        video.play();
      } else {
        // æ’­æ”¾ç¬¬ 6 æ¬¡å¾Œåœæ­¢
        showEndControls();
      }
    });

    // é¡¯ç¤º ğŸ” & â¹ï¸ æŒ‰éˆ•
    function showEndControls() {
      endControls.style.display = "flex";
    }

    // é‡æ–°æ’­æ”¾ 6 æ¬¡
    function restartVideo() {
      playCount = 0;
      endControls.style.display = "none";
      video.currentTime = 0;
      video.play();
    }

    // å®Œå…¨åœæ­¢ï¼Œä¸å†æ’­æ”¾
    function stopVideo() {
      video.pause();
      video.currentTime = 0;
    }
  </script>

</body>
</html>
